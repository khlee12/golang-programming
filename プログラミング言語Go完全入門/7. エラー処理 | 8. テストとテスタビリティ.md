# 7. エラー処理
[link](https://docs.google.com/presentation/d/1HW3wG8J_Q2536Iu__7HGr_mhurHajC7IOGjCnn3kZmg/edit#slide=id.g4fa5dcc83a_0_0)

## エラー処理
- ![Screenshot 2024-08-10 at 13 42 04](https://github.com/user-attachments/assets/f7c39749-cae2-44ce-a163-ef09427ddf81)
- エラー処理
  - リトライをかけるもしくは別の方法をとる
  - nilと比較してエラーが発生したかチェックする（スコープを狭くするため、代入つきのifを用いる場合が多い）
    - ```
      if err := f(); err != nil {
          // エラー処理
      }
      ```
  - 自前のエラー型を定義したり、エラー処理をまとめたりすることもできる
    - 一般的に、自作のエラー型を定義しって使うのが多い
    - ```
      type PathError struct {
             Op   string
             Path string
             Err  error
      }
      
      func (e *PathError) Error() string {
             return e.Op + " " + e.Path + ": " + e.Err.Error()
      }
      
      ```
  - エラーの値によって分岐する
　  - `errors.Is`関数を使う

## パニックとリカバー
- ![Screenshot 2024-08-10 at 13 42 47](https://github.com/user-attachments/assets/ae99d4ff-e46b-4f57-a359-839e36c9df7d)
- ```
  package main
  
  import "fmt"
  
  func main() {
      defer func() {
          if r := recover(); r != nil {
              fmt.Println("Recovered from panic:", r)
          }
      }()
  
      fmt.Println("Starting program")
      panic("Something went wrong!")
      fmt.Println("This will not be printed")
  }
  ```
- エラーとパニック
  - エラーとパニックの使い分け
    - パニックは回避不可能な場合のみ使用する
    - 想定内のエラーはerror型で処理する
- MUST関数
  - 特定な場面でエラーが発生した時点で即座にプログラムを停止させる場合、使われる
  - ![Screenshot 2024-08-10 at 14 48 30](https://github.com/user-attachments/assets/c5ad4ce4-7328-480a-8ff7-b70c5a41011c)
  - `MustCompile`: 初期化時に正規表現が確実に正しいと保証されている場合に使用します。無効な正規表現があるとプログラムがパニックになります。
  - `Compile`: 正規表現が動的に生成されたり、無効である可能性がある場合に使用し、エラーハンドリングを行います。

# 8. テストとテスタビリティ
[link](https://docs.google.com/presentation/d/1p_fyQ7uSw6FYvsfEbKuZIKgVMNaWQ95JNV1dcXqMhbU/edit#slide=id.g4fa745498a_0_0)

## 単体テスト
- `go test`: _test.goというsuffixのついたファイルを対象にしてテストを実行
- ![Screenshot 2024-08-10 at 14 53 41](https://github.com/user-attachments/assets/38d56654-7ace-4d73-a80a-fd2898e1b50e)
- testingパッケージ
  - テストを行うため機能を提供するパッケージ
  - 

